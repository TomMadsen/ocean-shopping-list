(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=a(1),s=a.n(l),i=a(5),m=a(3),u=a(12),d=a(2),p=a(11),f=(a(29),function(){return r.a.createElement("div",{className:"container d-flex justify-content-around my-5"},r.a.createElement(u.b,{className:"btn btn-primary my-5",style:{width:"25%",minWidth:"80px"},to:"/login"},"Login"),r.a.createElement(u.b,{className:"btn btn-primary my-5",style:{width:"25%",minWidth:"80px"},to:"/register"},"Register"))}),b=function(){return r.a.createElement("div",{className:"container-fluid py-3",style:{backgroundColor:"skyBlue"}},r.a.createElement("h1",{className:"display-4 text-center"},"Shopping List"),r.a.createElement("p",{className:"text-center"},"An app created by ",r.a.createElement("a",{href:"https://oceanweb.com.au",target:"_blank",rel:"noopener noreferrer"},"Oceanweb")))},h=a(10),g=a(8),y=function(e){var t=e.setAuth,a=Object(n.useState)({name:"",email:"",password:""}),c=Object(m.a)(a,2),o=c[0],l=c[1],d=o.name,f=o.email,b=o.password,y=function(e){l(Object(g.a)(Object(g.a)({},o),{},Object(h.a)({},e.target.name,e.target.value)))},E=function(){var e=Object(i.a)(s.a.mark((function e(a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={name:d,email:f,password:b},e.next=5,fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(c=e.sent).token?(localStorage.setItem("token",c.token),t(!0),p.a.success("registration successful!")):(t(!1),p.a.error(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container p-3 my-5",style:{backgroundColor:"#f0f0f0",borderRadius:"10px"}},r.a.createElement("h2",{className:"text-center"},"Registration"),r.a.createElement("p",{className:"text-center"},"fill in your details below to begin..."),r.a.createElement("form",{onSubmit:function(e){return E(e)}},r.a.createElement("input",{className:"form-control my-3",type:"text",name:"name",value:d,placeholder:"name",onChange:function(e){y(e)}}),r.a.createElement("input",{className:"form-control my-3",type:"email",name:"email",value:f,placeholder:"email",onChange:function(e){y(e)}}),r.a.createElement("input",{className:"form-control my-3",type:"password",name:"password",value:b,placeholder:"password",onChange:function(e){y(e)}}),r.a.createElement("button",{className:"btn btn-primary btn-block"},"Register")),r.a.createElement(u.b,{to:"/login"},"Login"))},E=function(e){var t=e.setAuth,a=Object(n.useState)({email:"",password:""}),c=Object(m.a)(a,2),o=c[0],l=c[1],d=o.email,f=o.password,b=function(e){l(Object(g.a)(Object(g.a)({},o),{},Object(h.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(i.a)(s.a.mark((function e(a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:d,password:f},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:(c=e.sent).token?(localStorage.setItem("token",c.token),t(!0),p.a.success("login successful!")):(t(!1),p.a.error(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container p-3 my-5",style:{backgroundColor:"#f0f0f0",borderRadius:"10px"}},r.a.createElement("h2",{className:"text-center"},"Login"),r.a.createElement("p",{className:"text-center"},"fill in your details below to begin..."),r.a.createElement("form",{onSubmit:function(e){return y(e)}},r.a.createElement("input",{className:"form-control my-3",type:"email",name:"email",value:d,placeholder:"email",onChange:function(e){b(e)}}),r.a.createElement("input",{className:"form-control my-3",type:"password",name:"password",value:f,placeholder:"password",onChange:function(e){b(e)}}),r.a.createElement("button",{className:"btn btn-primary btn-block"},"Login")),r.a.createElement(u.b,{to:"/register"},"Register"))},v=function(e){var t=e.listItem,a=e.setIsChanged,c=Object(n.useState)({item:t.item,category:t.category,item_id:t.item_id}),o=Object(m.a)(c,2),l=o[0],u=o[1],d=l.item,p=l.category,f=l.item_id,b=function(e){u(Object(g.a)(Object(g.a)({},l),{},Object(h.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={item:d,category:p},e.next=5,fetch("/dashboard/list/".concat(f),{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(n)});case 5:a(!0),u({item:d,category:p}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/list/".concat(f),{method:"DELETE",headers:{token:localStorage.token}});case 3:a(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"d-flex my-1 justify-content-between"},r.a.createElement("button",{className:"btn btn-sm btn-secondary","data-toggle":"modal","data-target":"#id".concat(f)},"\ud83d\udd89"),r.a.createElement("button",{className:"btn btn-sm btn-warning",onClick:function(){return E()}},"\xd7")),r.a.createElement("div",{className:"modal fade",id:"id".concat(f),tabIndex:"-1","aria-hidden":"true",onClick:function(){return u({item:t.item,category:t.category,item_id:t.item_id})}},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("form",{onSubmit:function(e){return y(e)}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"Edit Item"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return u({item:t.item,category:t.category,item_id:t.item_id})}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-7"},r.a.createElement("label",{htmlFor:""},"Item"),r.a.createElement("input",{className:"form-control",type:"text",name:"item",value:d,onChange:function(e){return b(e)}})),r.a.createElement("div",{className:"col-5"},r.a.createElement("label",{htmlFor:""},"Category"),r.a.createElement("input",{className:"form-control",type:"text",name:"category",value:p,onChange:function(e){return b(e)}})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return u({item:t.item,category:t.category,item_id:t.item_id})}},"Close"),r.a.createElement("button",{className:"btn btn-primary",type:"submit","data-dismiss":"modal",onClick:function(e){return y(e)}},"Save changes")))))))},k=function(e){var t=e.i,a=e.listItem,c=e.setIsChanged,o=e.changeOrder,l=Object(n.useState)(!1),u=Object(m.a)(l,2),d=u[0],p=u[1];Object(n.useEffect)((function(){p(a.obtained)}),[]);var f=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t.target.checked),e.prev=1,e.next=4,t.target.checked;case 4:return n=e.sent,r={obtained:n},e.next=8,fetch("/dashboard/list/obtained/".concat(a.item_id),{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(r)});case 8:console.log("obtained: ",n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"row",style:{border:"1px solid grey",lineHeight:"1rem"}},r.a.createElement("div",{className:"col-6",style:{display:"flex"}},r.a.createElement("input",{type:"checkbox",checked:d,onChange:function(e){return f(e)}}),r.a.createElement("span",{style:{marginLeft:".5rem"}},r.a.createElement("button",{onClick:function(){return o(t,1)},style:{border:"none",display:"block"}},"\u25b4"),r.a.createElement("button",{onClick:function(){return o(t,-1)},style:{border:"none",display:"block"}},"\u25be")),r.a.createElement("span",{style:{lineHeight:"2rem",marginLeft:"3rem",textAlign:"center",textDecoration:d?"line-through":"none",color:d?" #808b96 ":"inherit"}},a.item)),r.a.createElement("div",{className:"col-4",style:{lineHeight:"2rem",textAlign:"center",textDecoration:d?"line-through":"none",color:d?" #808b96 ":"inherit"}},a.category),r.a.createElement("div",{className:"col-2"},r.a.createElement(v,{listItem:a,setIsChanged:c})))},x=function(e){var t=e.list,a=e.setIsChanged,c=e.handleSort,o=e.changeOrder,l=Object(n.useState)([]),s=Object(m.a)(l,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center mt-5"},"Items:"),r.a.createElement("div",{className:"row mt-4",style:{lineHeight:"1.2rem"}},r.a.createElement("div",{className:"col-6",style:{display:"flex"}},r.a.createElement("span",{style:{marginLeft:"1rem"}},r.a.createElement("button",{name:"item",style:{border:"none",display:"block"},onClick:function(e){return c(e,"up")}},"\u25b4"),r.a.createElement("button",{name:"item",style:{border:"none",display:"block"},onClick:function(e){return c(e,"down")}},"\u25be")),r.a.createElement("h3",{style:{marginLeft:"3rem"}},"Item")),r.a.createElement("div",{className:"col-4",style:{display:"flex"}},r.a.createElement("span",null,r.a.createElement("button",{name:"category",style:{border:"none",display:"block"},onClick:function(e){return c(e,"up")}},"\u25b4"),r.a.createElement("button",{name:"category",style:{border:"none",display:"block"},onClick:function(e){return c(e,"down")}},"\u25be")),r.a.createElement("h3",{style:{marginLeft:"1.5rem"}},"Category")),r.a.createElement("div",{className:"col-2",style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement("h3",null,"Action"))),0!==i.length&&null!==i[0].item_id&&i.map((function(e,t){return r.a.createElement(k,Object.assign({key:e.item_id},{i:t,listItem:e,setIsChanged:a,changeOrder:o}))})))},j=["produce","pantry","frozen-goods","bathroom","health","cleaning","household","office","education","garden","sport","recreation","auto","entertainment","baby","toys","other"],O=function(e){var t=e.setIsChanged,a=Object(n.useState)({item:"",category:""}),c=Object(m.a)(a,2),o=c[0],l=c[1],u=o.item,d=o.category,p=function(e){l(Object(g.a)(Object(g.a)({},o),{},Object(h.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(i.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={item:u,category:d},e.next=5,fetch("/dashboard/list",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(n)});case 5:t(!0),l({item:"",category:""}),document.querySelector("#item-input").focus(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){document.querySelector("#item-input").focus()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:function(e){return f(e)},className:"my-5"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{className:"form-control",id:"item-input",placeholder:"Item",type:"text",name:"item",value:u,onChange:function(e){return p(e)}})),r.a.createElement("div",{className:"col-4"},r.a.createElement("select",{className:"custom-select",name:"category",value:d,required:!0,onChange:function(e){return p(e)}},r.a.createElement("option",{value:"",disabled:!0,defaultValue:!0,hidden:!0},"Category"),j.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:function(e){return f(e)}},"Add to list")))))},N=function(e){var t=e.setAuth,a=Object(n.useState)(""),c=Object(m.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)([]),d=Object(m.a)(u,2),f=d[0],b=d[1],h=Object(n.useState)(!1),g=Object(m.a)(h,2),y=g[0],E=g[1],v=Object(n.useState)(!1),k=Object(m.a)(v,2),j=k[0],N=k[1],w=Object(n.useState)([]),C=Object(m.a)(w,2),S=C[0],I=C[1],_=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("another call"),e.next=4,fetch("/dashboard",{headers:{token:localStorage.token}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,l(a[0].user_name),b(a.sort((function(e,t){return e.list_id>t.list_id?1:-1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.name,"up"===a?I(f.sort((function(e,t){return e[n]>t[n]?-1:1}))):"down"===a&&I(f.sort((function(e,t){return e[n]>t[n]?1:-1}))),N(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){_(),E(!1)}),[y]),Object(n.useEffect)((function(){b(S),N(!1)}),[j]);var L=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.map((function(e,t){console.log(t,e.item_id);var a={i:t};fetch("/dashboard/listsort/".concat(e.item_id),{method:"PUT",headers:{"Content-Type":"application/json",token:localStorage.token},body:JSON.stringify(a)})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container p-3 my-5",style:{backgroundColor:"#f0f0f0",borderRadius:"10px"}},r.a.createElement("h3",{className:"text-center"},o,"'s shopping list"),r.a.createElement("div",{className:"container"},r.a.createElement(O,{setIsChanged:E}),r.a.createElement(x,{list:f,setIsChanged:E,handleSort:T,changeOrder:function(e,t){var a=e-t;-1===a&&(a=f.length-1),a===f.length&&(a=0),I(f.splice(a,0,f.splice(e,1)[0]))}})),r.a.createElement("span",{className:"d-flex justify-content-between"},r.a.createElement("button",{className:"btn btn-primary mt-5",onClick:function(e){return L(e)}},"Save order to database"),r.a.createElement("button",{className:"btn btn-secondary mt-5",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),Object(p.a)("You are now logged out")}(e)}},"Logout")))};p.a.configure({autoClose:2500});var w=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],o=function(e){c(e)},l=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-auth",{headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,o(!0===a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()})),r.a.createElement(n.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(b,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/register",render:function(){return a?r.a.createElement(d.a,{to:"/dashboard"}):r.a.createElement(y,{setAuth:o})}}),r.a.createElement(d.b,{exact:!0,path:"/login",render:function(){return a?r.a.createElement(d.a,{to:"/dashboard"}):r.a.createElement(E,{setAuth:o})}}),r.a.createElement(d.b,{exact:!0,path:"/dashboard",render:function(){return a?r.a.createElement(N,{setAuth:o}):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(f,null)}}),r.a.createElement(d.b,{path:"*",render:function(){return r.a.createElement(d.a,{to:"/"})}}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.043db336.chunk.js.map